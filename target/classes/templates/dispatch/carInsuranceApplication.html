<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>车辆保险登记*</title>
    <link th:href="@{/css/view.css}" rel="stylesheet">
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all"/>
    <style>
        .cke {
            visibility: hidden;
        }
    </style>
</head>
<body id="colloaBody">
<table style="min-width:950px;width:100%;height:100%;" cellpadding="0" cellspacing="0" border="0">
    <tbody>
    <tr valign="top">
        <td>&nbsp;</td>
        <td id="colloaForm">
            <div class="formTaskflowContainer">
                <form class="carInsuranceForm" id="carInsuranceAppForm" method="post" th:action="@{/carDispatch/carInsuranceAdd}">

                    <div style="TEXT-ALIGN: center"><span style="FONT-SIZE: 20px"><strong>车辆保险登记单</strong></span></div>
                    <div>
                        <table class="tableListBorder" style="TABLE-LAYOUT: fixed" cellspacing="0" cellpadding="0"
                               align="center"
                               border="0">
                            <colgroup>
                                <col width="25%">
                                <col width="25%">
                                <col width="25%">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>申请人</td>
                                <td id="dbf.operator" dbf.type="required">
                                    <input type="hidden" name="insuranceno">
                                    <input  name="applicant" class="fieldEditable">
                                </td>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>申请日期</td>
                                <td id="dbf.time2" dbf.type="date,required" >
                                    <input id="test1" name="applicationdate" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>主题</td>
                                <td id="dbf.division" dbf.type="required"  dbf.key="0">
                                    <input  name="theme" class="fieldEditable">
                                </td>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>车牌号</td>
                                <td id="dbf.text0" dbf.type="required!0" dbf.key="">
                                    <input  name="carbrand" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td style="TEXT-ALIGN: center">险种</td>
                                <td style="TEXT-ALIGN: center">保费</td>
                                <td style="TEXT-ALIGN: center">保额</td>
                                <td style="TEXT-ALIGN: center">备注</td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >交强险</td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="firstinsurancepremium" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="firstinsuranceamount" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center">
                                    <input name="firstinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >车辆损失险</td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="secondinsurancepremium" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="secondinsuranceamount" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center">
                                    <input name="secondinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >第三者责任人险</td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="thirdinsurancepremium" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="thirdinsuranceamount" class="fieldEditable">
                                </td>
                                <td style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="thirdinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >车上人员责任保险</td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="fourthinsurancepremium" class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center" dbf.type="">
                                    <input name="fourthinsuranceamount"  class="fieldEditable">
                                </td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="fourthinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >盗抢险</td>
                                <td  style="TEXT-ALIGN: center"><input name="fifthinsurancepremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="fifthinsuranceamount" class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="fifthinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >划痕险</td>
                                <td  style="TEXT-ALIGN: center"><input name="sixthinsurancepremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="sixthinsuranceamount"   class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="sixthinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >玻璃单独破碎险</td>
                                <td  style="TEXT-ALIGN: center"><input name="seventhinsurancepremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="seventhinsuranceamount"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="seventhinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >自燃险</td>
                                <td  style="TEXT-ALIGN: center"><input name="eighthinsurancepremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="eighthinsuranceamount"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="eighthinsuranceremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >指定专修厂</td>
                                <td  style="TEXT-ALIGN: center"><input name="repairshoppremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="repairshopamount"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="repairshopremarks" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td><input  type="checkbox" value="1" >不计免赔(责任免除)</td>
                                <td  style="TEXT-ALIGN: center"><input name="excludingdeductiblepremium"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center"><input name="excludingdeductibleamount"  class="fieldEditable"></td>
                                <td  style="TEXT-ALIGN: center" dbf.source="">
                                    <input name="excludingdeductibleremarks"  class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>投保公司</td>
                                <td id="dbf.text2" style="TEXT-ALIGN: center" dbf.type="required">
                                    <input id="e.dbf.text2" name="insurancecompany" class="fieldEditable">
                                </td>
                                <td style="TEXT-ALIGN: center">投保电话</td>
                                <td id="投保电话" style="TEXT-ALIGN: center" >
                                    <input id="e.投保电话" name="insurancecall" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>保险有效期</td>
                                <td id="dbf.time0" style="TEXT-ALIGN: center" dbf.type="date,required">
                                    <input id="test2" name="insuranceperiodstart" class="fieldEditable">
                                </td>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>至</td>
                                <td id="dbf.time1" style="TEXT-ALIGN: center" dbf.type="date,required">
                                    <input id="test3" name="insuranceperiodend" class="fieldEditable">
                                </td>
                            </tr>
                            <tr>
                                <td style="TEXT-ALIGN: center"><span style="COLOR: rgb(255,0,0)">*</span>投保总费用(元)
                                    <input onclick=""
                                        id="=" type="button" value="=" name="="></td>
                                <td id="dbf.budget" style="TEXT-ALIGN: center" dbf.type="amount,required" dbf.source="">
                                    <input id="e.dbf.budget" name="totalcost" class="fieldEditable textAmount" value="0">
                                </td>
                                <td style="TEXT-ALIGN: center">经办人</td>
                                <td id="dbf.text1" style="TEXT-ALIGN: center" dbf.type="" dbf.source="">
                                    <input id="e.dbf.text1" name="chargeperson" class="fieldEditable">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>&nbsp;</div>
                    <table class="tableForm" style="TABLE-LAYOUT: fixed" cellspacing="0" cellpadding="0" align="center"
                           border="0">
                        <colgroup>
                            <col width="60">
                            <col>
                        </colgroup>
                        <tbody>
                        <tr>
                            <td style="TEXT-ALIGN: right">附件:</td>
                            <td id="attachments" dbf.source="files">
                                <input type="hidden" name="enclosure" id="url_test">
                                <input id="enclosureId1" type="hidden"  name="filename">
                                <a id="enclosureId"  target="_blank" ></a>
                                <button type="button" class="layui-btn-sm" id="upload" style="float: right">
                                    上传附件
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            <form method="post"><input type="hidden" id="viewState" name="viewState"></form>
            <br>
            <div id="_vWorkflowActionsStatus" style="float:left;"></div>
            <div id="_vWorkflowActionsShow" align="right">
                <a id="submitBtn" class="button" style="cursor: pointer;" >确定</a>
                <a id="cancelBtn" class="button" style="cursor: pointer;" >取消</a>
            </div>
            <br>

        </td>
        <td>&nbsp;</td>
    </tr>
    </tbody>
</table>

<script src="/vendor/jquery/jquery.min.js"></script>

<script type="text/javascript" th:src="@{/layui/layui.js}"></script>
<script>
    layui.use(['form','layer','jquery','upload','laydate'],function(){
        form = layui.form;
        layer = layui.layer;
        $ = layui.jquery;
        upload = layui.upload;
        var laydate = layui.laydate;

        laydate.render({
            elem: '#test1',
        });

        datemax=new Date();
        laydate.render({
            elem: '#test2'
        });
        laydate.render({
            elem: '#test3'
        });


        var uploadInst = upload.render({
            elem: '#upload' //绑定元素
            ,url: '/upload' //上传接口
            ,accept: 'file'
            ,before:function(obj){
                obj.preview(function(index, file, result){
                    $("#enclosureId").text(file.name);
                    $("#enclosureId1").val(file.name);
                    console.log(index+" "+file.name+" "+result);
                });
            }
            ,done: function(res){
                //上传完毕回调
                if (res.code == 0) {
                    layer.msg("文件上传成功", {icon: 1});
                    console.log(res.data);
                    //$("#imgs").append("<img src=http://"+res.data+" width='300px' height='225px' style='margin-left: 8px'>");
                    $("#enclosureId").attr("href","http://"+res.data);
                    $("#enclosureId").click(function () {
                        window.open("http://"+res.data);
                    });
                    $("#url_test").val(res.data);
                } else {
                    layer.msg("文件上传失败", {icon: 2});
                }
            }
            ,error: function(){
                //请求异常回调

            }
        });
        $(function () {
            $("input").attr("autocomplete","off");
        });

        $("#submitBtn").click(function () {
            if(confirm("是否提交表单")){
                $("#carInsuranceAppForm").submit();
            }
        });
        $("#cancelBtn").click(function () {
            if(confirm("是否取消提交表单，并关闭该页面")){
                window.opener=null;
                window.open('','_self');
                window.close();
            }
        });
    });

</script>

</body>
</html>
